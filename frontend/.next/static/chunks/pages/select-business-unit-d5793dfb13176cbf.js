(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{1373:function(e,s,a){"use strict";a.d(s,{Z:function(){return createLucideIcon}});var t=a(7294);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(...e)=>e.filter((e,s,a)=>!!e&&a.indexOf(e)===s).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:i="",children:l,iconNode:c,...o},d)=>(0,t.createElement)("svg",{ref:d,...r,width:s,height:s,stroke:e,strokeWidth:n?24*Number(a)/Number(s):a,className:mergeClasses("lucide",i),...o},[...c.map(([e,s])=>(0,t.createElement)(e,s)),...Array.isArray(l)?l:[l]])),createLucideIcon=(e,s)=>{let a=(0,t.forwardRef)(({className:a,...r},i)=>(0,t.createElement)(n,{ref:i,iconNode:s,className:mergeClasses(`lucide-${toKebabCase(e)}`,a),...r}));return a.displayName=`${e}`,a}},6309:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},3742:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8051:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},9455:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2290:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/select-business-unit",function(){return a(1715)}])},4530:function(e,s,a){"use strict";var t=a(5893);a(7294);var r=a(607);s.Z=e=>{let{children:s,variant:a="primary",size:n="md",loading:i=!1,icon:l,iconPosition:c="left",fullWidth:o=!1,className:d="",disabled:m,type:x="button",...u}=e,h=["btn focus-ring transition-all duration-200 font-medium",{primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",danger:"btn-danger",ghost:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",outline:"btn-outline"}[a],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[n],o?"w-full":"",d].filter(Boolean).join(" ");return(0,t.jsxs)(r.E.button,{whileHover:{scale:m||i?1:1.02},whileTap:{scale:m||i?1:.98},className:h,disabled:!!m||i,type:x,...u,children:[i&&(0,t.jsx)(()=>(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),{}),!i&&l&&"left"===c&&(0,t.jsx)("span",{className:"mr-2",children:l}),s,!i&&l&&"right"===c&&(0,t.jsx)("span",{className:"ml-2",children:l})]})}},3157:function(e,s,a){"use strict";var t=a(5893);a(7294);var r=a(607);let Card=e=>{let{children:s,className:a="",hover:n=!1,padding:i="md"}=e,l=["card",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[i],n?"hover:shadow-medium transition-shadow duration-200":"",a].filter(Boolean).join(" ");return(0,t.jsx)(r.E.div,{className:l,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:n?{y:-2}:{},children:s})};Card.Header=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"card-header ".concat(a),children:s})},Card.Body=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"card-body ".concat(a),children:s})},Card.Footer=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"card-footer ".concat(a),children:s})},s.Z=Card},1715:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return SelectBusinessUnit}});var t=a(5893),r=a(7294),n=a(9008),i=a.n(n),l=a(607),c=a(1144),o=a(4530),d=a(3157),m=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,m.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var u=a(8051),h=a(3742),p=a(6309),y=a(9455);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,m.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var f=a(5843);function SelectBusinessUnit(){let{login:e,logout:s}=(0,r.useContext)(c.Vo),[a,n]=(0,r.useState)([]),[m,b]=(0,r.useState)(""),[j,v]=(0,r.useState)(!0),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)("");(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){console.warn("⚠️ Token n\xe3o encontrado, redirecionando para login..."),window.location.href="/login";return}loadBusinessUnits()},[]);let loadBusinessUnits=async()=>{try{v(!0);let e=await (0,f.xB)();n(e),1===e.length&&b(e[0].id)}catch(e){console.error("Erro ao carregar BUs:",e),C("Erro ao carregar empresas dispon\xedveis")}finally{v(!1)}},handleSubmit=async e=>{if(e.preventDefault(),!m){C("Selecione uma empresa para continuar");return}try{w(!0),C("");let e=await (0,f.IH)(m);localStorage.setItem("token",e.access_token),window.location.href="/dashboard"}catch(e){console.error("Erro ao selecionar BU:",e),C("Erro ao selecionar empresa. Tente novamente.")}finally{w(!1)}},handleLogout=()=>{s()},getPermissionText=e=>{let s=[];return e.can_read&&s.push("Visualizar"),e.can_write&&s.push("Editar"),e.can_delete&&s.push("Excluir"),e.can_manage_users&&s.push("Gerenciar Usu\xe1rios"),s.join(", ")};return j?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando empresas dispon\xedveis..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"FinaFlow - Selecionar Empresa"}),(0,t.jsx)("meta",{name:"description",content:"Selecione a empresa que deseja acessar no FinaFlow"})]}),(0,t.jsx)("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(circle, #e5e7eb 1px, transparent 1px)",backgroundSize:"20px 20px"}}),(0,t.jsxs)("div",{className:"w-full max-w-2xl relative z-10",children:[(0,t.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(x,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"admin"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Super Admin"})]})]}),(0,t.jsxs)("button",{onClick:handleLogout,className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Fazer logout",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Logout"})]})]}),(0,t.jsxs)(l.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"text-center mb-8",children:[(0,t.jsx)("img",{src:"/logo-finaflow.svg",alt:"finaFlow",className:"h-12 mx-auto mb-3"}),(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Selecione sua Empresa"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Escolha a empresa que deseja acessar"})]}),(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:(0,t.jsx)(d.Z,{className:"backdrop-blur-sm bg-white/80 border-white/20 shadow-xl",children:(0,t.jsxs)(d.Z.Body,{className:"p-8",children:[(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,t.jsx)("div",{className:"space-y-4",children:a.length>0?a.map(e=>(0,t.jsxs)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},className:"relative p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(m===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>b(e.id),children:[m===e.id&&(0,t.jsx)("div",{className:"absolute top-4 right-4 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(h.Z,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(p.Z,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-500 bg-gray-100 px-2 py-1 rounded",children:e.code})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Empresa: ",e.tenant_name]}),(0,t.jsx)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(y.Z,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:["Permiss\xf5es: ",getPermissionText(e.permissions)]})]})})]})]})]},e.id)):(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(p.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma empresa dispon\xedvel"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Voc\xea n\xe3o tem acesso a nenhuma empresa no momento."}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("button",{onClick:handleLogout,className:"inline-flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Fazer Logout"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Entre em contato com o administrador para obter acesso."})]})]})}),k&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-red-600 text-sm",children:k})}),(0,t.jsx)(o.Z,{type:"submit",variant:"primary",size:"lg",fullWidth:!0,loading:N,disabled:!m,children:N?"Entrando...":(0,t.jsxs)(t.Fragment,{children:["Continuar",(0,t.jsx)(g,{className:"w-4 h-4 ml-2"})]})})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsxs)("button",{onClick:handleLogout,className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Fazer Logout"})]}),(0,t.jsx)("button",{onClick:()=>window.location.href="/login",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)("span",{children:"← Trocar Usu\xe1rio"})})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Problemas de acesso? Entre em contato com o administrador."})})]})]})})})]})]})}},9008:function(e,s,a){e.exports=a(9201)}},function(e){e.O(0,[607,774,888,179],function(){return e(e.s=2290)}),_N_E=e.O()}]);