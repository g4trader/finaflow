(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[616],{7805:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return t(1384)}])},4530:function(e,a,t){"use strict";var n=t(5893);t(7294);var s=t(607);a.Z=e=>{let{children:a,variant:t="primary",size:l="md",loading:r=!1,icon:i,iconPosition:o="left",fullWidth:c=!1,className:d="",disabled:m,type:u="button",...h}=e,x=["btn focus-ring transition-all duration-200 font-medium",{primary:"btn-primary",secondary:"btn-secondary",success:"btn-success",danger:"btn-danger",ghost:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",outline:"btn-outline"}[t],{sm:"btn-sm",md:"btn-md",lg:"btn-lg"}[l],c?"w-full":"",d].filter(Boolean).join(" ");return(0,n.jsxs)(s.E.button,{whileHover:{scale:m||r?1:1.02},whileTap:{scale:m||r?1:.98},className:x,disabled:!!m||r,type:u,...h,children:[r&&(0,n.jsx)(()=>(0,n.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),{}),!r&&i&&"left"===o&&(0,n.jsx)("span",{className:"mr-2",children:i}),a,!r&&i&&"right"===o&&(0,n.jsx)("span",{className:"ml-2",children:i})]})}},8024:function(e,a,t){"use strict";var n=t(5893),s=t(7294);let l=(0,s.forwardRef)((e,a)=>{let{label:t,error:s,helperText:l,icon:r,iconPosition:i="left",fullWidth:o=!1,className:c="",...d}=e,m=["input",s?"input-error":"",r?"left"===i?"pl-10":"pr-10":"",o?"w-full":"",c].filter(Boolean).join(" ");return(0,n.jsxs)("div",{className:o?"w-full":"",children:[t&&(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,n.jsxs)("div",{className:"relative",children:[r&&(0,n.jsx)("div",{className:"absolute inset-y-0 ".concat("left"===i?"left-0 pl-3":"right-0 pr-3"," flex items-center pointer-events-none"),children:(0,n.jsx)("span",{className:"text-gray-400 ".concat(s?"text-red-400":""),children:r})}),(0,n.jsx)("input",{ref:a,className:m,...d})]}),s&&(0,n.jsx)("p",{className:"mt-1 text-sm text-red-600",children:s}),l&&!s&&(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});l.displayName="Input",a.Z=l},1384:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Signup}});var n=t(5893),s=t(7294),l=t(9008),r=t.n(l),i=t(4298),o=t.n(i),c=t(1664),d=t.n(c),m=t(1163),u=t(7066),h=t(8024),x=t(4530),p=t(1144),f=t(3454);let g=(()=>{let e="http://127.0.0.1:8000";return e?e.startsWith("http://")?e.replace("http://","https://"):e:"https://finaflow-backend-609095880025.us-central1.run.app"})();function Signup(){let{token:e,role:a,signup:t}=(0,s.useContext)(p.Vo),l=(0,m.useRouter)(),i=(0,s.useRef)(null),[c,v]=(0,s.useState)({name:"",email:"",password:"",confirm:"",company:""}),[b,j]=(0,s.useState)(""),[w,N]=(0,s.useState)(!1),[y,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{C(!0)},[]);let onChange=e=>{v(a=>({...a,[e.target.name]:e.target.value}))},handleSubmit=async e=>{if(e.preventDefault(),j(""),c.password!==c.confirm){j("As senhas n\xe3o conferem.");return}try{N(!0),await t({username:c.name,email:c.email,password:c.password,role:"tenant_user",tenant_id:c.company}),window.location.href="/login"}catch(e){var a,n;j((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.detail)||"N\xe3o foi poss\xedvel criar sua conta.")}finally{N(!1)}};if((0,s.useEffect)(()=>{y&&(!e||"super_admin"!==a)&&l.replace("/login")},[y,e,a,l]),!y||!e||"super_admin"!==a)return(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})});let initGoogle=()=>{let e=f.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID;e&&window.google&&i.current&&(window.google.accounts.id.initialize({client_id:e,callback:async e=>{var a,t,n,s;try{let n=await u.Z.post("".concat(g,"/auth/google"),{credential:e.credential}),s=(null===(a=n.data)||void 0===a?void 0:a.access_token)||(null===(t=n.data)||void 0===t?void 0:t.token);s?(localStorage.setItem("token",s),window.location.href="/dashboard"):j("Falha ao autenticar com Google.")}catch(e){j((null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(n=s.data)||void 0===n?void 0:n.detail)||"Falha ao autenticar com Google.")}}}),window.google.accounts.id.renderButton(i.current,{theme:"outline",size:"large",text:"continue_with",shape:"pill",width:320,logo_alignment:"left"}))};return(0,s.useEffect)(()=>{window.google&&initGoogle()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"finaFlow â€” Criar conta"}),(0,n.jsx)("meta",{name:"description",content:"Crie sua conta finaFlow e comece a gerenciar finan\xe7as com previs\xf5es e relat\xf3rios claros."})]}),(0,n.jsx)(o(),{src:"https://accounts.google.com/gsi/client",strategy:"afterInteractive",onLoad:initGoogle}),(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-6",children:(0,n.jsxs)("div",{className:"w-full max-w-md",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("img",{src:"/logo-finaflow.svg",alt:"finaFlow",className:"h-10 mx-auto mb-4"}),(0,n.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Comece gr\xe1tis"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Crie sua conta em menos de 1 minuto"})]}),(0,n.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 shadow-xl rounded-xl p-6",children:[(0,n.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,n.jsx)(h.Z,{name:"name",label:"Seu nome",placeholder:"Nome e sobrenome",value:c.name,onChange:onChange,required:!0,fullWidth:!0}),(0,n.jsx)(h.Z,{type:"email",name:"email",label:"Email",placeholder:"voce@empresa.com",value:c.email,onChange:onChange,required:!0,fullWidth:!0}),(0,n.jsx)(h.Z,{name:"company",label:"Empresa / Unidade",placeholder:"Nome da sua empresa",value:c.company,onChange:onChange,fullWidth:!0}),(0,n.jsx)(h.Z,{type:"password",name:"password",label:"Senha",placeholder:"Crie uma senha",value:c.password,onChange:onChange,required:!0,fullWidth:!0}),(0,n.jsx)(h.Z,{type:"password",name:"confirm",label:"Confirmar senha",placeholder:"Repita a senha",value:c.confirm,onChange:onChange,required:!0,fullWidth:!0}),b&&(0,n.jsx)("p",{className:"text-sm text-red-600",children:b}),(0,n.jsx)(x.Z,{type:"submit",size:"lg",fullWidth:!0,loading:w,children:"Criar conta"})]}),(0,n.jsxs)("div",{className:"flex items-center my-6",children:[(0,n.jsx)("div",{className:"flex-1 h-px bg-gray-200"}),(0,n.jsx)("span",{className:"px-3 text-xs text-gray-400",children:"ou"}),(0,n.jsx)("div",{className:"flex-1 h-px bg-gray-200"})]}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)("div",{ref:i})}),(0,n.jsxs)("p",{className:"mt-6 text-center text-sm text-gray-600",children:["J\xe1 tem conta?"," ",(0,n.jsx)(d(),{href:"/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Entrar"})]}),(0,n.jsxs)("p",{className:"mt-2 text-center text-xs text-gray-400",children:["Ao continuar voc\xea concorda com nossos ",(0,n.jsx)("a",{href:"#",className:"underline",children:"Termos"})," e ",(0,n.jsx)("a",{href:"#",className:"underline",children:"Privacidade"}),"."]})]})]})})]})}},4298:function(e,a,t){e.exports=t(5354)}},function(e){e.O(0,[607,200,774,888,179],function(){return e(e.s=7805)}),_N_E=e.O()}]);