(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{3352:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/companies",function(){return a(111)}])},5415:function(e,t,a){"use strict";a.d(t,{Z:function(){return ProtectedRoute}});var s=a(5893),l=a(7294),n=a(1163),r=a(1144);function ProtectedRoute(e){let{children:t}=e,{token:a,isLoading:i}=(0,r.aC)(),c=(0,n.useRouter)(),[d,o]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{i||a||(console.log("\uD83D\uDD12 Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),o(!0),c.replace("/login"))},[a,i,c]),i||d||!a)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:i?"Carregando...":"Verificando autentica\xe7\xe3o..."})]})}):(0,s.jsx)(s.Fragment,{children:t})}},8024:function(e,t,a){"use strict";var s=a(5893),l=a(7294);let n=(0,l.forwardRef)((e,t)=>{let{label:a,error:l,helperText:n,icon:r,iconPosition:i="left",fullWidth:c=!1,className:d="",...o}=e,m=["input",l?"input-error":"",r?"left"===i?"pl-10":"pr-10":"",c?"w-full":"",d].filter(Boolean).join(" ");return(0,s.jsxs)("div",{className:c?"w-full":"",children:[a&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,s.jsxs)("div",{className:"relative",children:[r&&(0,s.jsx)("div",{className:"absolute inset-y-0 ".concat("left"===i?"left-0 pl-3":"right-0 pr-3"," flex items-center pointer-events-none"),children:(0,s.jsx)("span",{className:"text-gray-400 ".concat(l?"text-red-400":""),children:r})}),(0,s.jsx)("input",{ref:t,className:m,...o})]}),l&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),n&&!l&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})});n.displayName="Input",t.Z=n},7571:function(e,t,a){"use strict";var s=a(5893),l=a(7294),n=a(1352),r=a(4530);t.Z=e=>{let{isOpen:t,onClose:a,title:i,children:c,size:d="md",showCloseButton:o=!0}=e;return((0,l.useEffect)(()=>{let handleEscape=e=>{"Escape"===e.key&&a()};return t&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[t,a]),t)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:a}),(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]," bg-white rounded-xl shadow-xl"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),o&&(0,s.jsx)(r.Z,{variant:"ghost",size:"sm",onClick:a,icon:(0,s.jsx)(n.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"p-6",children:c})]})})]}):null}},111:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Companies}});var s=a(5893),l=a(7294),n=a(1144),r=a(5843),i=a(4530),c=a(8024),d=a(7571),o=a(2785),m=a(5415);let CompaniesContent=()=>{let{token:e}=(0,n.aC)(),[t,a]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[u,p]=(0,l.useState)(null),[h,f]=(0,l.useState)({name:"",domain:"",status:"active"}),[g,v]=(0,l.useState)(!0),b=(0,l.useCallback)(async()=>{try{v(!0);let t=await (0,r.DS)(null!=e?e:void 0);a(t)}catch(e){console.error("Erro ao carregar empresas:",e)}finally{v(!1)}},[e]);(0,l.useEffect)(()=>{b()},[b]);let j=(0,l.useCallback)((e,t)=>{f(a=>({...a,[e]:t}))},[]),y=(0,l.useCallback)(async t=>{t.preventDefault();try{u?await (0,r.Jq)(u.id,h,null!=e?e:void 0):await (0,r.LS)(h,null!=e?e:void 0),await b(),x(!1),p(null),f({name:"",domain:"",status:"active"})}catch(e){console.error("Erro ao salvar empresa:",e)}},[u,h,e,b]),N=(0,l.useCallback)(e=>{p(e),f({name:e.name,domain:e.domain,status:e.status}),x(!0)},[]),w=(0,l.useCallback)(async t=>{if(window.confirm("Tem certeza que deseja excluir esta empresa?"))try{await (0,r.yO)(t,null!=e?e:void 0),await b()}catch(e){console.error("Erro ao excluir empresa:",e)}},[e,b]),C=(0,l.useCallback)(()=>{p(null),f({name:"",domain:"",status:"active"}),x(!0)},[]),k=(0,l.useCallback)(()=>{x(!1),p(null),f({name:"",domain:"",status:"active"})},[]);return g?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"text-lg",children:"Carregando empresas..."})}):(0,s.jsxs)(o.Z,{title:"Empresas",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsx)(i.Z,{onClick:C,className:"bg-blue-600 hover:bg-blue-700",children:"Nova Empresa"})}),(0,s.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dom\xednio"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.domain}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===e.status?"Ativo":"Inativo"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,s.jsx)("button",{onClick:()=>N(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Editar"}),(0,s.jsx)("button",{onClick:()=>w(e.id),className:"text-red-600 hover:text-red-900",children:"Excluir"})]})]},e.id))})]})})}),(0,s.jsx)(d.Z,{isOpen:m,onClose:k,title:u?"Editar Empresa":"Nova Empresa",children:(0,s.jsx)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Empresa"}),(0,s.jsx)(c.Z,{type:"text",placeholder:"Digite o nome da empresa",value:h.name,onChange:e=>j("name",e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dom\xednio"}),(0,s.jsx)(c.Z,{type:"text",placeholder:"exemplo.com",value:h.domain,onChange:e=>j("domain",e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,s.jsxs)("select",{value:h.status,onChange:e=>j("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"active",children:"Ativo"}),(0,s.jsx)("option",{value:"inactive",children:"Inativo"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)(i.Z,{type:"button",onClick:k,className:"bg-gray-300 hover:bg-gray-400 text-gray-800",children:"Cancelar"}),(0,s.jsx)(i.Z,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:u?"Atualizar":"Criar"})]})]})})})]})};function Companies(){return(0,s.jsx)(m.Z,{children:(0,s.jsx)(CompaniesContent,{})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=3352)}),_N_E=e.O()}]);