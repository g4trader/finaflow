(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{4314:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]])},2112:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},4622:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},528:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(8326)}])},8326:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return dashboard}});var a=s(5893),r=s(7294),n=s(607),i=s(9858),l=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,l.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),d=(0,l.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var o=s(8621),x=s(1222),m=s(4622),h=s(2112),u=s(4314),y=s(2785),g=s(1144),j=s(5843),dashboard=()=>{let{user:e,needsBusinessUnitSelection:t}=(0,g.aC)(),[s,l]=(0,r.useState)([]),[p,f]=(0,r.useState)([]),[N,b]=(0,r.useState)(!0),[v,w]=(0,r.useState)({totalRevenue:0,totalExpenses:0,totalCosts:0,netFlow:0,currentBalance:0,transactionCount:0});(0,r.useEffect)(()=>{if(t||!(null==e?void 0:e.business_unit_id)){window.location.href="/select-business-unit";return}loadDashboardData()},[t,e]);let loadDashboardData=async()=>{try{b(!0);let e=new Date,t=new Date;t.setDate(t.getDate()-30);let[s,a]=await Promise.all([(0,j.kD)({start_date:t.toISOString(),end_date:e.toISOString(),period_type:"daily"}),(0,j.f1)({start_date:t.toISOString(),end_date:e.toISOString()})]);l(s),f(a.slice(0,10));let r=s.reduce((e,t)=>e+t.total_revenue,0),n=s.reduce((e,t)=>e+t.total_expenses,0),i=s.reduce((e,t)=>e+t.total_costs,0),c=s.reduce((e,t)=>e+t.net_flow,0),d=s.length>0?s[s.length-1].closing_balance:0;w({totalRevenue:r,totalExpenses:n,totalCosts:i,netFlow:c,currentBalance:d,transactionCount:a.length})}catch(e){console.error("Erro ao carregar dados do dashboard:",e)}finally{b(!1)}},formatCurrency=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),formatDate=e=>new Date(e).toLocaleDateString("pt-BR"),getMetricIcon=e=>{switch(e){case"revenue":return(0,a.jsx)(i.Z,{className:"w-6 h-6 text-green-600"});case"expenses":return(0,a.jsx)(c,{className:"w-6 h-6 text-red-600"});case"costs":return(0,a.jsx)(d,{className:"w-6 h-6 text-orange-600"});case"balance":return(0,a.jsx)(o.Z,{className:"w-6 h-6 text-blue-600"});default:return(0,a.jsx)(x.Z,{className:"w-6 h-6 text-gray-600"})}};return N?(0,a.jsx)(y.Z,{title:"Dashboard",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,a.jsx)(y.Z,{title:"Dashboard",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Ol\xe1, ",(null==e?void 0:e.first_name)||"Usu\xe1rio","!"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Bem-vindo ao seu dashboard financeiro"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:new Date().toLocaleDateString("pt-BR")})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Receita Total"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(v.totalRevenue)})]}),getMetricIcon("revenue")]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 text-green-600 mr-1"}),(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"+12.5%"}),(0,a.jsx)("span",{className:"text-gray-500 ml-1",children:"vs m\xeas anterior"})]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Despesas Totais"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(v.totalExpenses)})]}),getMetricIcon("expenses")]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-red-600 mr-1"}),(0,a.jsx)("span",{className:"text-red-600 font-medium",children:"+8.2%"}),(0,a.jsx)("span",{className:"text-gray-500 ml-1",children:"vs m\xeas anterior"})]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Custos Totais"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(v.totalCosts)})]}),getMetricIcon("costs")]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-orange-600 mr-1"}),(0,a.jsx)("span",{className:"text-orange-600 font-medium",children:"+5.7%"}),(0,a.jsx)("span",{className:"text-gray-500 ml-1",children:"vs m\xeas anterior"})]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Saldo Atual"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:formatCurrency(v.currentBalance)})]}),getMetricIcon("balance")]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 text-blue-600 mr-1"}),(0,a.jsx)("span",{className:"text-blue-600 font-medium",children:"+15.3%"}),(0,a.jsx)("span",{className:"text-gray-500 ml-1",children:"vs m\xeas anterior"})]})]})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Fluxo de Caixa (\xdaltimos 30 dias)"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"Receitas"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{children:"Despesas"})]})]})]}),(0,a.jsx)("div",{className:"h-64 flex items-end justify-between space-x-2",children:s.slice(-7).map((e,t)=>(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center space-y-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-t",children:(0,a.jsx)("div",{className:"bg-green-500 rounded-t",style:{height:"".concat(e.total_revenue/Math.max(...s.map(e=>e.total_revenue))*100,"%")}})}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-t",children:(0,a.jsx)("div",{className:"bg-red-500 rounded-t",style:{height:"".concat(e.total_expenses/Math.max(...s.map(e=>e.total_expenses))*100,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})]},t))})]}),(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Transa\xe7\xf5es Recentes"}),(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ver todas"})]}),(0,a.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("credit"===e.transaction_type?"bg-green-100":"bg-red-100"),children:"credit"===e.transaction_type?(0,a.jsx)(h.Z,{className:"w-5 h-5 text-green-600"}):(0,a.jsx)(u.Z,{className:"w-5 h-5 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.category})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold ".concat("credit"===e.transaction_type?"text-green-600":"text-red-600"),children:["credit"===e.transaction_type?"+":"-",formatCurrency(e.amount)]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:formatDate(e.transaction_date)})]})]},e.id))})]})]})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=528)}),_N_E=e.O()}]);