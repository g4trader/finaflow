(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{2837:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return a(4481)}])},5415:function(e,t,a){"use strict";a.d(t,{Z:function(){return ProtectedRoute}});var s=a(5893),n=a(7294),r=a(1163),i=a(1144);function ProtectedRoute(e){let{children:t}=e,{token:a,isLoading:l}=(0,i.aC)(),c=(0,r.useRouter)(),[o,d]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{l||a||(console.log("\uD83D\uDD12 Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),d(!0),c.replace("/login"))},[a,l,c]),l||o||!a)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:l?"Carregando...":"Verificando autentica\xe7\xe3o..."})]})}):(0,s.jsx)(s.Fragment,{children:t})}},3157:function(e,t,a){"use strict";var s=a(5893);a(7294);var n=a(607);let Card=e=>{let{children:t,className:a="",hover:r=!1,padding:i="md"}=e,l=["card",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[i],r?"hover:shadow-medium transition-shadow duration-200":"",a].filter(Boolean).join(" ");return(0,s.jsx)(n.E.div,{className:l,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:r?{y:-2}:{},children:t})};Card.Header=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"card-header ".concat(a),children:t})},Card.Body=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"card-body ".concat(a),children:t})},Card.Footer=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"card-footer ".concat(a),children:t})},t.Z=Card},8024:function(e,t,a){"use strict";var s=a(5893),n=a(7294);let r=(0,n.forwardRef)((e,t)=>{let{label:a,error:n,helperText:r,icon:i,iconPosition:l="left",fullWidth:c=!1,className:o="",...d}=e,u=["input",n?"input-error":"",i?"left"===l?"pl-10":"pr-10":"",c?"w-full":"",o].filter(Boolean).join(" ");return(0,s.jsxs)("div",{className:c?"w-full":"",children:[a&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,s.jsxs)("div",{className:"relative",children:[i&&(0,s.jsx)("div",{className:"absolute inset-y-0 ".concat("left"===l?"left-0 pl-3":"right-0 pr-3"," flex items-center pointer-events-none"),children:(0,s.jsx)("span",{className:"text-gray-400 ".concat(n?"text-red-400":""),children:i})}),(0,s.jsx)("input",{ref:t,className:u,...d})]}),n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),r&&!n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]})});r.displayName="Input",t.Z=r},4481:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Settings}});var s=a(5893),n=a(7294),r=a(6245),i=a(2785),l=a(3157),c=a(8024),o=a(4530),d=a(1144),u=a(5843),m=a(5415);function SettingsContent(){let{token:e,tenantId:t}=(0,n.useContext)(d.Vo),a=e?(0,r.Z)(e).sub:null,[m,x]=(0,n.useState)(""),[h,f]=(0,n.useState)(""),[p,j]=(0,n.useState)(""),[N,v]=(0,n.useState)(""),[y,g]=(0,n.useState)(""),[b,S]=(0,n.useState)(""),[w,C]=(0,n.useState)(""),[E,Z]=(0,n.useState)(""),[_,z]=(0,n.useState)(""),handleEmailSubmit=async t=>{t.preventDefault(),v(""),g("");try{if(!a)throw Error("user id missing");await (0,u.Nq)(a,{email:m},null!=e?e:void 0),v("Email atualizado com sucesso."),x("")}catch(e){g("Erro ao atualizar email.")}},handlePasswordSubmit=async t=>{t.preventDefault(),S(""),C("");try{if(!a)throw Error("user id missing");await (0,u.Nq)(a,{password:h},null!=e?e:void 0),S("Senha atualizada com sucesso."),f("")}catch(e){C("Erro ao atualizar senha.")}},handleTenantSubmit=async a=>{a.preventDefault(),Z(""),z("");try{if(!t)throw Error("tenant id missing");await (0,u.Jq)(t,{name:p},null!=e?e:void 0),Z("Dados do tenant atualizados com sucesso."),j("")}catch(e){z("Erro ao atualizar dados do tenant.")}};return(0,s.jsx)(i.Z,{title:"Configura\xe7\xf5es",children:(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(l.Z,{children:[(0,s.jsx)(l.Z.Header,{children:(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Configura\xe7\xf5es da Conta"})}),(0,s.jsxs)(l.Z.Body,{className:"space-y-8",children:[(0,s.jsxs)("form",{onSubmit:handleEmailSubmit,className:"space-y-4",children:[(0,s.jsx)(c.Z,{type:"email",label:"Novo Email",value:m,onChange:e=>x(e.target.value),fullWidth:!0}),N&&(0,s.jsx)("p",{className:"text-sm text-green-600",children:N}),y&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:y}),(0,s.jsx)(o.Z,{type:"submit",children:"Atualizar Email"})]}),(0,s.jsxs)("form",{onSubmit:handlePasswordSubmit,className:"space-y-4",children:[(0,s.jsx)(c.Z,{type:"password",label:"Nova Senha",value:h,onChange:e=>f(e.target.value),fullWidth:!0}),b&&(0,s.jsx)("p",{className:"text-sm text-green-600",children:b}),w&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:w}),(0,s.jsx)(o.Z,{type:"submit",children:"Alterar Senha"})]}),(0,s.jsxs)("form",{onSubmit:handleTenantSubmit,className:"space-y-4",children:[(0,s.jsx)(c.Z,{type:"text",label:"Nome do Tenant",value:p,onChange:e=>j(e.target.value),fullWidth:!0}),E&&(0,s.jsx)("p",{className:"text-sm text-green-600",children:E}),_&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:_}),(0,s.jsx)(o.Z,{type:"submit",children:"Atualizar Tenant"})]})]})]})})})}function Settings(){return(0,s.jsx)(m.Z,{children:(0,s.jsx)(SettingsContent,{})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=2837)}),_N_E=e.O()}]);