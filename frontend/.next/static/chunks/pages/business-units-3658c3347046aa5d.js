(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{2799:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/business-units",function(){return s(4977)}])},5415:function(e,t,s){"use strict";s.d(t,{Z:function(){return ProtectedRoute}});var a=s(5893),n=s(7294),l=s(1163),r=s(1144);function ProtectedRoute(e){let{children:t}=e,{token:s,isLoading:i}=(0,r.aC)(),c=(0,l.useRouter)(),[d,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{i||s||(console.log("\uD83D\uDD12 Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),o(!0),c.replace("/login"))},[s,i,c]),i||d||!s)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:i?"Carregando...":"Verificando autentica\xe7\xe3o..."})]})}):(0,a.jsx)(a.Fragment,{children:t})}},8024:function(e,t,s){"use strict";var a=s(5893),n=s(7294);let l=(0,n.forwardRef)((e,t)=>{let{label:s,error:n,helperText:l,icon:r,iconPosition:i="left",fullWidth:c=!1,className:d="",...o}=e,u=["input",n?"input-error":"",r?"left"===i?"pl-10":"pr-10":"",c?"w-full":"",d].filter(Boolean).join(" ");return(0,a.jsxs)("div",{className:c?"w-full":"",children:[s&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,a.jsxs)("div",{className:"relative",children:[r&&(0,a.jsx)("div",{className:"absolute inset-y-0 ".concat("left"===i?"left-0 pl-3":"right-0 pr-3"," flex items-center pointer-events-none"),children:(0,a.jsx)("span",{className:"text-gray-400 ".concat(n?"text-red-400":""),children:r})}),(0,a.jsx)("input",{ref:t,className:u,...o})]}),n&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),l&&!n&&(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]})});l.displayName="Input",t.Z=l},7571:function(e,t,s){"use strict";var a=s(5893),n=s(7294),l=s(1352),r=s(4530);t.Z=e=>{let{isOpen:t,onClose:s,title:i,children:c,size:d="md",showCloseButton:o=!0}=e;return((0,n.useEffect)(()=>{let handleEscape=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[t,s]),t)?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:s}),(0,a.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]," bg-white rounded-xl shadow-xl"),onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),o&&(0,a.jsx)(r.Z,{variant:"ghost",size:"sm",onClick:s,icon:(0,a.jsx)(l.Z,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"p-6",children:c})]})})]}):null}},4977:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return BusinessUnits}});var a=s(5893),n=s(7294),l=s(1144),r=s(5843),i=s(4530),c=s(8024),d=s(7571),o=s(2785),u=s(5415);let BusinessUnitsContent=()=>{let{token:e}=(0,l.aC)(),[t,s]=(0,n.useState)([]),[u,x]=(0,n.useState)([]),[m,h]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null),[g,b]=(0,n.useState)({tenant_id:"",name:"",code:"",status:"active"}),[j,v]=(0,n.useState)(!0),y=(0,n.useCallback)(async()=>{try{v(!0);let t=await (0,r.mu)(null!=e?e:void 0);s(t)}catch(e){console.error("Erro ao carregar BUs:",e)}finally{v(!1)}},[e]),N=(0,n.useCallback)(async()=>{try{let t=await (0,r.DS)(null!=e?e:void 0);x(t)}catch(e){console.error("Erro ao carregar empresas:",e)}},[e]);(0,n.useEffect)(()=>{y(),N()},[y,N]);let w=(0,n.useCallback)((e,t)=>{b(s=>({...s,[e]:t}))},[]),k=(0,n.useCallback)(async t=>{t.preventDefault();try{p?await (0,r.p0)(p.id,g,null!=e?e:void 0):await (0,r.j3)(g,null!=e?e:void 0),await y(),h(!1),f(null),b({tenant_id:"",name:"",code:"",status:"active"})}catch(e){console.error("Erro ao salvar BU:",e)}},[p,g,e,y]),C=(0,n.useCallback)(e=>{f(e),b({tenant_id:e.tenant_id,name:e.name,code:e.code,status:e.status}),h(!0)},[]),E=(0,n.useCallback)(async t=>{if(window.confirm("Tem certeza que deseja excluir esta BU?"))try{await (0,r.G)(t,null!=e?e:void 0),await y()}catch(e){console.error("Erro ao excluir BU:",e)}},[e,y]),_=(0,n.useCallback)(()=>{f(null),b({tenant_id:"",name:"",code:"",status:"active"}),h(!0)},[]),B=(0,n.useCallback)(()=>{h(!1),f(null),b({tenant_id:"",name:"",code:"",status:"active"})},[]),U=(0,n.useCallback)(e=>{let t=u.find(t=>t.id===e);return t?t.name:"N/A"},[u]);return j?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"text-lg",children:"Carregando BUs..."})}):(0,a.jsxs)(o.Z,{title:"Business Units",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)(i.Z,{onClick:_,className:"bg-blue-600 hover:bg-blue-700",children:"Nova BU"})}),(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"C\xf3digo"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empresa"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criado em"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.code}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U(e.tenant_id)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===e.status?"Ativo":"Inativo"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>C(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>E(e.id),className:"text-red-600 hover:text-red-900",children:"Excluir"})]})]},e.id))})]})})}),(0,a.jsx)(d.Z,{isOpen:m,onClose:B,title:p?"Editar BU":"Nova BU",children:(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg max-w-md w-full",children:(0,a.jsxs)("form",{onSubmit:k,children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empresa"}),(0,a.jsxs)("select",{value:g.tenant_id,onChange:e=>w("tenant_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Selecione uma empresa"}),u.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da BU"}),(0,a.jsx)(c.Z,{type:"text",placeholder:"Digite o nome da BU",value:g.name,onChange:e=>w("name",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"C\xf3digo"}),(0,a.jsx)(c.Z,{type:"text",placeholder:"Digite o c\xf3digo da BU",value:g.code,onChange:e=>w("code",e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:g.status,onChange:e=>w("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"active",children:"Ativo"}),(0,a.jsx)("option",{value:"inactive",children:"Inativo"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(i.Z,{type:"button",onClick:B,className:"bg-gray-300 hover:bg-gray-400 text-gray-800",children:"Cancelar"}),(0,a.jsx)(i.Z,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:p?"Atualizar":"Criar"})]})]})})})]})};function BusinessUnits(){return(0,a.jsx)(u.Z,{children:(0,a.jsx)(BusinessUnitsContent,{})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=2799)}),_N_E=e.O()}]);