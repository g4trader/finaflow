(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{1012:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7705:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3718:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},1273:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forecast",function(){return a(5727)}])},5415:function(e,t,a){"use strict";a.d(t,{Z:function(){return ProtectedRoute}});var s=a(5893),n=a(7294),r=a(1163),l=a(1144);function ProtectedRoute(e){let{children:t}=e,{token:a,isLoading:i}=(0,l.aC)(),c=(0,r.useRouter)(),[o,d]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{i||a||(console.log("\uD83D\uDD12 Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),d(!0),c.replace("/login"))},[a,i,c]),i||o||!a)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:i?"Carregando...":"Verificando autentica\xe7\xe3o..."})]})}):(0,s.jsx)(s.Fragment,{children:t})}},3157:function(e,t,a){"use strict";var s=a(5893);a(7294);var n=a(607);let Card=e=>{let{children:t,className:a="",hover:r=!1,padding:l="md"}=e,i=["card",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[l],r?"hover:shadow-medium transition-shadow duration-200":"",a].filter(Boolean).join(" ");return(0,s.jsx)(n.E.div,{className:i,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:r?{y:-2}:{},children:t})};Card.Header=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"card-header ".concat(a),children:t})},Card.Body=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"card-body ".concat(a),children:t})},Card.Footer=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"card-footer ".concat(a),children:t})},t.Z=Card},8024:function(e,t,a){"use strict";var s=a(5893),n=a(7294);let r=(0,n.forwardRef)((e,t)=>{let{label:a,error:n,helperText:r,icon:l,iconPosition:i="left",fullWidth:c=!1,className:o="",...d}=e,u=["input",n?"input-error":"",l?"left"===i?"pl-10":"pr-10":"",c?"w-full":"",o].filter(Boolean).join(" ");return(0,s.jsxs)("div",{className:c?"w-full":"",children:[a&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,s.jsxs)("div",{className:"relative",children:[l&&(0,s.jsx)("div",{className:"absolute inset-y-0 ".concat("left"===i?"left-0 pl-3":"right-0 pr-3"," flex items-center pointer-events-none"),children:(0,s.jsx)("span",{className:"text-gray-400 ".concat(n?"text-red-400":""),children:l})}),(0,s.jsx)("input",{ref:t,className:u,...d})]}),n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),r&&!n&&(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]})});r.displayName="Input",t.Z=r},7571:function(e,t,a){"use strict";var s=a(5893),n=a(7294),r=a(1352),l=a(4530);t.Z=e=>{let{isOpen:t,onClose:a,title:i,children:c,size:o="md",showCloseButton:d=!0}=e;return((0,n.useEffect)(()=>{let handleEscape=e=>{"Escape"===e.key&&a()};return t&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[t,a]),t)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:a}),(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[o]," bg-white rounded-xl shadow-xl"),onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),d&&(0,s.jsx)(l.Z,{variant:"ghost",size:"sm",onClick:a,icon:(0,s.jsx)(r.Z,{className:"w-4 h-4"})})]}),(0,s.jsx)("div",{className:"p-6",children:c})]})})]}):null}},6905:function(e,t,a){"use strict";var s=a(5893);a(7294);var n=a(607);let Table=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("table",{className:"min-w-full divide-y divide-gray-200 ".concat(a),children:t})})})};Table.Header=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("thead",{className:"bg-gray-50 ".concat(a),children:t})},Table.Body=e=>{let{children:t,className:a=""}=e;return(0,s.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white ".concat(a),children:t})},Table.Row=e=>{let{children:t,className:a="",onClick:r}=e;return(0,s.jsx)(n.E.tr,{className:"".concat(r?"cursor-pointer hover:bg-gray-50":""," ").concat(a),onClick:r,whileHover:r?{backgroundColor:"#f9fafb"}:{},transition:{duration:.2},children:t})},Table.Cell=e=>{let{children:t,className:a="",header:n=!1}=e;return(0,s.jsx)(n?"th":"td",{className:"".concat(n?"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider":"px-6 py-4 whitespace-nowrap text-sm text-gray-900"," ").concat(a),children:t})},t.Z=Table},5727:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Forecast}});var s=a(5893),n=a(7294),r=a(7764),l=a(1012),i=a(7705),c=a(3718),o=a(2785),d=a(3157),u=a(6905),x=a(7571),h=a(8024),m=a(4530),v=a(5415),f=a(5843),p=a(1144);function ForecastContent(){let{token:e,tenantId:t}=(0,n.useContext)(p.Vo),[a,v]=(0,n.useState)([]),[j,y]=(0,n.useState)([]),[b,w]=(0,n.useState)(""),[N,g]=(0,n.useState)("all"),[Z,C]=(0,n.useState)(!1),[k,_]=(0,n.useState)(null),[E,D]=(0,n.useState)({account_id:"",amount:"",description:""}),fetchData=async()=>{try{let[t,a]=await Promise.all([(0,f.a)(null!=e?e:void 0),(0,f.T8)(null!=e?e:void 0)]);v(t),y(a)}catch(e){console.error("Erro ao buscar previs\xf5es",e)}};(0,n.useEffect)(()=>{fetchData()},[e]);let openEdit=e=>{_(e),D({account_id:e.account_id,amount:String(e.amount),description:e.description||""}),C(!0)},handleSubmit=async a=>{a.preventDefault();let s={account_id:E.account_id,amount:parseFloat(E.amount),description:E.description,tenant_id:t};try{k?await (0,f.Me)(k.id,s,null!=e?e:void 0):await (0,f.Kh)(s,null!=e?e:void 0),await fetchData(),C(!1)}catch(e){console.error("Erro ao salvar previs\xe3o",e)}},handleDelete=async t=>{try{await (0,f.e8)(t,null!=e?e:void 0),await fetchData()}catch(e){console.error("Erro ao excluir previs\xe3o",e)}},S=a.filter(e=>{let t=(e.description||"").toLowerCase().includes(b.toLowerCase()),a="all"===N||e.account_id===N;return t&&a});return(0,s.jsxs)(o.Z,{title:"Forecast",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsx)("div",{className:"flex-1 max-w-xs",children:(0,s.jsx)(h.Z,{placeholder:"Buscar previs\xf5es...",value:b,onChange:e=>w(e.target.value),icon:(0,s.jsx)(r.Z,{className:"w-4 h-4"}),fullWidth:!0})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("select",{value:N,onChange:e=>g(e.target.value),className:"input",children:[(0,s.jsx)("option",{value:"all",children:"Todas as contas"}),j.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)(m.Z,{icon:(0,s.jsx)(l.Z,{className:"w-4 h-4"}),onClick:()=>{_(null),D({account_id:"",amount:"",description:""}),C(!0)},children:"Nova Previs\xe3o"})]})]}),(0,s.jsx)(d.Z,{children:(0,s.jsx)(d.Z.Body,{className:"p-0",children:(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(u.Z.Header,{children:(0,s.jsxs)(u.Z.Row,{children:[(0,s.jsx)(u.Z.Cell,{header:!0,children:"Conta"}),(0,s.jsx)(u.Z.Cell,{header:!0,children:"Valor"}),(0,s.jsx)(u.Z.Cell,{header:!0,children:"Descri\xe7\xe3o"}),(0,s.jsx)(u.Z.Cell,{header:!0,children:"Data"}),(0,s.jsx)(u.Z.Cell,{header:!0,children:"A\xe7\xf5es"})]})}),(0,s.jsx)(u.Z.Body,{children:S.map(e=>{var t;return(0,s.jsxs)(u.Z.Row,{children:[(0,s.jsx)(u.Z.Cell,{children:null===(t=j.find(t=>t.id===e.account_id))||void 0===t?void 0:t.name}),(0,s.jsxs)(u.Z.Cell,{children:["R$ ",Number(e.amount).toFixed(2)]}),(0,s.jsx)(u.Z.Cell,{children:e.description}),(0,s.jsx)(u.Z.Cell,{children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,s.jsx)(u.Z.Cell,{children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(m.Z,{variant:"ghost",size:"sm",icon:(0,s.jsx)(i.Z,{className:"w-4 h-4"}),onClick:()=>openEdit(e)}),(0,s.jsx)(m.Z,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",icon:(0,s.jsx)(c.Z,{className:"w-4 h-4"}),onClick:()=>handleDelete(e.id)})]})})]},e.id)})})]})})})]}),(0,s.jsx)(x.Z,{isOpen:Z,onClose:()=>C(!1),title:k?"Editar Previs\xe3o":"Nova Previs\xe3o",children:(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conta"}),(0,s.jsxs)("select",{className:"input w-full",value:E.account_id,onChange:e=>D({...E,account_id:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Selecione uma conta"}),j.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsx)(h.Z,{label:"Valor",type:"number",step:"0.01",value:E.amount,onChange:e=>D({...E,amount:e.target.value}),fullWidth:!0}),(0,s.jsx)(h.Z,{label:"Descri\xe7\xe3o",value:E.description,onChange:e=>D({...E,description:e.target.value}),fullWidth:!0}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,s.jsx)(m.Z,{variant:"secondary",type:"button",onClick:()=>C(!1),children:"Cancelar"}),(0,s.jsx)(m.Z,{type:"submit",variant:"primary",children:k?"Atualizar":"Criar"})]})]})})]})}function Forecast(){return(0,s.jsx)(v.Z,{children:(0,s.jsx)(ForecastContent,{})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=1273)}),_N_E=e.O()}]);