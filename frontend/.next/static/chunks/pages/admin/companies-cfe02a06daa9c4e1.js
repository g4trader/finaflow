(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{1012:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5390:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/companies",function(){return a(7493)}])},3157:function(e,s,a){"use strict";var t=a(5893);a(7294);var r=a(607);let Card=e=>{let{children:s,className:a="",hover:l=!1,padding:i="md"}=e,n=["card",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[i],l?"hover:shadow-medium transition-shadow duration-200":"",a].filter(Boolean).join(" ");return(0,t.jsx)(r.E.div,{className:n,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:l?{y:-2}:{},children:s})};Card.Header=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"card-header ".concat(a),children:s})},Card.Body=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"card-body ".concat(a),children:s})},Card.Footer=e=>{let{children:s,className:a=""}=e;return(0,t.jsx)("div",{className:"card-footer ".concat(a),children:s})},s.Z=Card},7493:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return companies}});var t=a(5893),r=a(7294),l=a(1163),i=a(1144),n=a(2785),c=a(3157),d=a(4530),x=a(1012),m=a(6309),o=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,o.Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var j=a(9525),p=a(5843),companies=()=>{let{user:e,token:s}=(0,i.aC)(),a=(0,l.useRouter)(),[o,u]=(0,r.useState)([]),[N,y]=(0,r.useState)([]),[g,v]=(0,r.useState)(!0),[f,Z]=(0,r.useState)("");if((null==e?void 0:e.role)!=="super_admin")return(0,t.jsx)(n.Z,{children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto py-8",children:(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acesso Negado"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Apenas super administradores podem acessar esta p\xe1gina."}),(0,t.jsx)(d.Z,{onClick:()=>a.push("/dashboard"),children:"Voltar ao Dashboard"})]})})})})});(0,r.useEffect)(()=>{loadData()},[]);let loadData=async()=>{v(!0),Z("");try{let[e,a]=await Promise.all([(0,p.DS)(s||void 0),(0,p.mu)(void 0,s||void 0)]);u(e),y(a)}catch(e){console.error("Erro ao carregar dados:",e),Z(e.message||"Erro ao carregar empresas")}finally{v(!1)}},getBUsForTenant=e=>N.filter(s=>s.tenant_id===e);return(0,t.jsx)(n.Z,{title:"Gerenciar Empresas",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto py-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83C\uDFE2 Empresas do Sistema"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Gerencie todas as empresas e suas filiais"})]}),(0,t.jsxs)(d.Z,{onClick:()=>a.push("/admin/onboard-company"),variant:"primary",size:"lg",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Ativar Nova Empresa"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(m.Z,{className:"w-8 h-8 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Empresas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]})})}),(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(h,{className:"w-8 h-8 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Filiais"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.length})]})]})})}),(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)(j.Z,{className:"w-8 h-8 text-purple-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"M\xe9dia Filiais/Empresa"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.length>0?(N.length/o.length).toFixed(1):0})]})]})})})]}),g?(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-600",children:"Carregando empresas..."})})})}):f?(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-red-600",children:f}),(0,t.jsx)(d.Z,{onClick:loadData,className:"mt-4",children:"Tentar Novamente"})]})})}):0===o.length?(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(m.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma empresa cadastrada"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Comece ativando sua primeira empresa"}),(0,t.jsxs)(d.Z,{onClick:()=>a.push("/admin/onboard-company"),children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 mr-2"}),"Ativar Primeira Empresa"]})]})})}):(0,t.jsx)("div",{className:"space-y-6",children:o.map(e=>{let s=getBUsForTenant(e.id);return(0,t.jsx)(c.Z,{children:(0,t.jsx)(c.Z.Body,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center mb-2",children:[(0,t.jsx)(m.Z,{className:"w-6 h-6 text-blue-600 mr-3"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.domain})]}),(0,t.jsx)("span",{className:"ml-4 px-3 py-1 text-xs font-medium rounded-full ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===e.status?"Ativo":e.status})]}),(0,t.jsxs)("div",{className:"mt-4 ml-9",children:[(0,t.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[(0,t.jsx)(h,{className:"w-4 h-4 mr-1"}),"Filiais (",s.length,")"]}),0===s.length?(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Nenhuma filial cadastrada"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,t.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:[e.name," (",e.code,")"]},e.id))})]}),(0,t.jsxs)("div",{className:"mt-4 ml-9 text-xs text-gray-500",children:["Criado em: ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]}),(0,t.jsx)("div",{className:"ml-4",children:(0,t.jsx)(d.Z,{size:"sm",variant:"secondary",onClick:()=>a.push("/admin/companies/".concat(e.id)),children:"Ver Detalhes"})})]})})},e.id)})})]})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=5390)}),_N_E=e.O()}]);