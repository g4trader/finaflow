(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{4396:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/onboard-company",function(){return s(1750)}])},1750:function(e,a,s){"use strict";s.r(a);var r=s(5893),n=s(7294),l=s(1163),t=s(1144);a.default=()=>{let{user:e,token:a}=(0,t.aC)(),s=(0,l.useRouter)(),[d,o]=(0,n.useState)(""),[i,c]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[b,h]=(0,n.useState)(!1),[g,y]=(0,n.useState)(null);if((null==e?void 0:e.role)!=="super_admin")return(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 max-w-md w-full",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acesso Negado"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Apenas super administradores podem acessar esta p\xe1gina."}),(0,r.jsx)("button",{onClick:()=>s.push("/dashboard"),className:"w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Voltar ao Dashboard"})]})});let handleSubmit=async e=>{e.preventDefault(),h(!0),y(null);try{let e=await fetch("".concat("http://127.0.0.1:8000","/api/v1/admin/onboard-new-company"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({tenant_name:d,tenant_domain:i,admin_email:m,bu_name:"Matriz",bu_code:"MAT",spreadsheet_id:u,import_data:!0})}),s=await e.json();y(s)}catch(e){console.error("Erro:",e),y({success:!1,error:e.message})}finally{h(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 py-12 px-4",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uD83C\uDFE2 Ativar Nova Empresa"}),(0,r.jsx)("p",{className:"text-gray-600 mb-8",children:"Processo completo de onboarding para SaaS"}),g?(0,r.jsx)("div",{children:g.success?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-green-900 mb-4",children:"✅ Empresa Ativada com Sucesso!"}),g.steps&&(0,r.jsx)("div",{className:"mb-4",children:g.steps.map((e,a)=>(0,r.jsx)("div",{className:"text-sm text-gray-700 mb-1",children:e},a))})]}),g.company_info&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"font-bold text-blue-900 mb-4",children:"\uD83D\uDD11 Credenciais de Acesso"}),(0,r.jsxs)("div",{className:"space-y-3 bg-white p-4 rounded",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Empresa:"}),(0,r.jsx)("p",{className:"font-bold",children:g.company_info.tenant_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Username:"}),(0,r.jsx)("p",{className:"font-mono bg-gray-100 px-2 py-1 rounded inline-block",children:g.company_info.admin_username})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Senha Tempor\xe1ria:"}),(0,r.jsx)("p",{className:"font-mono bg-yellow-100 px-2 py-1 rounded inline-block font-bold",children:g.company_info.admin_password})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Email:"}),(0,r.jsx)("p",{children:g.company_info.admin_email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"URL:"}),(0,r.jsx)("a",{href:g.company_info.login_url,className:"text-blue-600 underline",children:g.company_info.login_url})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm",children:["⚠️ ",(0,r.jsx)("strong",{children:"IMPORTANTE:"})," Salve essas credenciais e envie para o cliente."]})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>y(null),className:"flex-1 bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300",children:"Ativar Outra Empresa"}),(0,r.jsx)("button",{onClick:()=>s.push("/admin/companies"),className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"Ver Todas as Empresas"})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-red-900 mb-2",children:"❌ Erro na Ativa\xe7\xe3o"}),(0,r.jsx)("p",{className:"text-red-700",children:g.error||"Erro desconhecido"})]}),(0,r.jsx)("button",{onClick:()=>y(null),className:"w-full bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700",children:"Tentar Novamente"})]})}):(0,r.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Empresa *"}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Acme Corporation",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dom\xednio *"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: acme.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email do Administrador *"}),(0,r.jsx)("input",{type:"email",value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: admin@acme.com",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ID da Planilha Google Sheets *"}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"Ex: 1rWMdDhwiNoC7iMycmQGWWDIacrePr1gB7c_mbt1patQ",required:!0}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"ID encontrado na URL da planilha: docs.google.com/spreadsheets/d/[ID]/edit"})]}),(0,r.jsx)("button",{type:"submit",disabled:b||!d||!i||!m||!u,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed font-medium",children:b?"Criando empresa e importando dados...":"Ativar Empresa"})]})]})})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4396)}),_N_E=e.O()}]);