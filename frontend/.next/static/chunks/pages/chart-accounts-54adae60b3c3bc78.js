(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{4464:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1012:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3718:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4588:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chart-accounts",function(){return t(2773)}])},2773:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return chart_accounts}});var a=t(5893),l=t(7294),r=t(2785),c=t(8142),n=t(1012),d=t(8971),i=t(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,i.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var o=t(4464);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,i.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var m=t(3718),h=t(1144),p=t(5843),chart_accounts=()=>{let{token:e,user:s}=(0,h.aC)(),[t,i]=(0,l.useState)(null),[g,b]=(0,l.useState)(!0),[j,v]=(0,l.useState)(null),[N,y]=(0,l.useState)(new Set),[f,w]=(0,l.useState)(new Set),[C,k]=(0,l.useState)(!1),[_,S]=(0,l.useState)(null),[Z,E]=(0,l.useState)(!1),[A,P]=(0,l.useState)(null);(0,l.useEffect)(()=>{e?loadChartAccounts():(v("Usu\xe1rio n\xe3o autenticado"),b(!1))},[e]);let loadChartAccounts=async()=>{try{b(!0),v(null);let e=await (0,p.B6)();i(e)}catch(e){v(e.message||"Erro ao carregar plano de contas")}finally{b(!1)}},handleImport=async()=>{if(_)try{E(!0),v(null);let e=await (0,p.ap)(_);P(e),e.success&&(await loadChartAccounts(),k(!1),S(null))}catch(e){v(e.message||"Erro ao importar arquivo")}finally{E(!1)}},toggleGroup=e=>{let s=new Set(N);s.has(e)?s.delete(e):s.add(e),y(s)},toggleSubgroup=e=>{let s=new Set(f);s.has(e)?s.delete(e):s.add(e),w(s)},getSubgroupsForGroup=e=>(null==t?void 0:t.subgroups.filter(s=>s.group_id===e))||[],getAccountsForSubgroup=e=>(null==t?void 0:t.accounts.filter(s=>s.subgroup_id===e))||[],getAccountTypeColor=e=>{switch(e.toLowerCase()){case"receita":return"bg-green-100 text-green-800";case"custo":return"bg-red-100 text-red-800";case"despesa":return"bg-orange-100 text-orange-800";case"investimento":return"bg-blue-100 text-blue-800";case"movimenta\xe7\xe3o":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e?g?(0,a.jsx)(r.Z,{title:"Plano de Contas",children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando plano de contas..."})]})})}):j?(0,a.jsx)(r.Z,{title:"Plano de Contas",children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 text-xl mb-4",children:"âŒ Erro"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:j}),(0,a.jsx)("button",{onClick:loadChartAccounts,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Tentar Novamente"})]})})}):(0,a.jsx)(r.Z,{title:"Plano de Contas",children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Plano de Contas"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Gerencie a estrutura cont\xe1bil da empresa"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>k(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(c.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Importar CSV"})]}),(0,a.jsxs)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:"Nova Conta"})]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null==t?void 0:t.groups.length)||0}),(0,a.jsx)("div",{className:"text-gray-600",children:"Grupos"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null==t?void 0:t.subgroups.length)||0}),(0,a.jsx)("div",{className:"text-gray-600",children:"Subgrupos"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:(null==t?void 0:t.accounts.length)||0}),(0,a.jsx)("div",{className:"text-gray-600",children:"Contas"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null==t?void 0:t.groups.filter(e=>e.is_active).length)||0}),(0,a.jsx)("div",{className:"text-gray-600",children:"Ativos"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Estrutura Hier\xe1rquica"})}),(0,a.jsx)("div",{className:"p-6",children:null==t?void 0:t.groups.map(e=>(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100",onClick:()=>toggleGroup(e.id),children:[N.has(e.id)?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-gray-500 mr-3"}):(0,a.jsx)(x,{className:"h-5 w-5 text-gray-500 mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.code,")"]}),!e.is_active&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded",children:"Inativo"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]}),N.has(e.id)&&(0,a.jsx)("div",{className:"ml-8 mt-2 space-y-2",children:getSubgroupsForGroup(e.id).map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg cursor-pointer hover:bg-blue-100",onClick:()=>toggleSubgroup(e.id),children:[f.has(e.id)?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-blue-500 mr-3"}):(0,a.jsx)(x,{className:"h-5 w-5 text-blue-500 mr-3"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"font-medium text-blue-900",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-blue-600",children:["(",e.code,")"]}),!e.is_active&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded",children:"Inativo"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:e.description})]})]}),f.has(e.id)&&(0,a.jsx)("div",{className:"ml-8 mt-2 space-y-2",children:getAccountsForSubgroup(e.id).map(e=>(0,a.jsxs)("div",{className:"flex items-center p-3 bg-white border border-gray-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",e.code,")"]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(getAccountTypeColor(e.account_type)),children:e.account_type}),!e.is_active&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded",children:"Inativo"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-green-600",children:(0,a.jsx)(u,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"p-1 text-gray-400 hover:text-red-600",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]})]},e.id))})]},e.id))})]},e.id))})]})]}),C&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,a.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Importar Plano de Contas"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Arquivo CSV"}),(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{var s;return S((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),A&&(0,a.jsxs)("div",{className:"p-3 rounded mb-4 ".concat(A.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[A.message,A.summary&&(0,a.jsxs)("div",{className:"mt-2 text-sm",children:[(0,a.jsxs)("p",{children:["Grupos criados: ",A.summary.groups_created]}),(0,a.jsxs)("p",{children:["Subgrupos criados: ",A.summary.subgroups_created]}),(0,a.jsxs)("p",{children:["Contas criadas: ",A.summary.accounts_created]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{k(!1),S(null),P(null)},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancelar"}),(0,a.jsx)("button",{onClick:handleImport,disabled:!_||Z,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:Z?"Importando...":"Importar"})]})]})})})]})}):(0,a.jsx)(r.Z,{title:"Plano de Contas",children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 text-xl mb-4",children:"\uD83D\uDD12"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Usu\xe1rio n\xe3o autenticado"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Fa\xe7a login para acessar esta p\xe1gina"})]})})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=4588)}),_N_E=e.O()}]);