(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{4622:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var l=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2612:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var l=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},6953:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var l=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},1012:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var l=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7705:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var l=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3718:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});var l=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,l.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4764:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return a(5649)}])},5415:function(e,s,a){"use strict";a.d(s,{Z:function(){return ProtectedRoute}});var l=a(5893),t=a(7294),r=a(1163),n=a(1144);function ProtectedRoute(e){let{children:s}=e,{token:a,isLoading:i}=(0,n.aC)(),c=(0,r.useRouter)(),[d,o]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{i||a||(console.log("\uD83D\uDD12 Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),o(!0),c.replace("/login"))},[a,i,c]),i||d||!a)?(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-600",children:i?"Carregando...":"Verificando autentica\xe7\xe3o..."})]})}):(0,l.jsx)(l.Fragment,{children:s})}},3157:function(e,s,a){"use strict";var l=a(5893);a(7294);var t=a(607);let Card=e=>{let{children:s,className:a="",hover:r=!1,padding:n="md"}=e,i=["card",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n],r?"hover:shadow-medium transition-shadow duration-200":"",a].filter(Boolean).join(" ");return(0,l.jsx)(t.E.div,{className:i,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:r?{y:-2}:{},children:s})};Card.Header=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"card-header ".concat(a),children:s})},Card.Body=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"card-body ".concat(a),children:s})},Card.Footer=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"card-footer ".concat(a),children:s})},s.Z=Card},8024:function(e,s,a){"use strict";var l=a(5893),t=a(7294);let r=(0,t.forwardRef)((e,s)=>{let{label:a,error:t,helperText:r,icon:n,iconPosition:i="left",fullWidth:c=!1,className:d="",...o}=e,x=["input",t?"input-error":"",n?"left"===i?"pl-10":"pr-10":"",c?"w-full":"",d].filter(Boolean).join(" ");return(0,l.jsxs)("div",{className:c?"w-full":"",children:[a&&(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,l.jsxs)("div",{className:"relative",children:[n&&(0,l.jsx)("div",{className:"absolute inset-y-0 ".concat("left"===i?"left-0 pl-3":"right-0 pr-3"," flex items-center pointer-events-none"),children:(0,l.jsx)("span",{className:"text-gray-400 ".concat(t?"text-red-400":""),children:n})}),(0,l.jsx)("input",{ref:s,className:x,...o})]}),t&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:t}),r&&!t&&(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]})});r.displayName="Input",s.Z=r},7571:function(e,s,a){"use strict";var l=a(5893),t=a(7294),r=a(1352),n=a(4530);s.Z=e=>{let{isOpen:s,onClose:a,title:i,children:c,size:d="md",showCloseButton:o=!0}=e;return((0,t.useEffect)(()=>{let handleEscape=e=>{"Escape"===e.key&&a()};return s&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[s,a]),s)?(0,l.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:a}),(0,l.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]," bg-white rounded-xl shadow-xl"),onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),o&&(0,l.jsx)(n.Z,{variant:"ghost",size:"sm",onClick:a,icon:(0,l.jsx)(r.Z,{className:"w-4 h-4"})})]}),(0,l.jsx)("div",{className:"p-6",children:c})]})})]}):null}},6905:function(e,s,a){"use strict";var l=a(5893);a(7294);var t=a(607);let Table=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsx)("table",{className:"min-w-full divide-y divide-gray-200 ".concat(a),children:s})})})};Table.Header=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("thead",{className:"bg-gray-50 ".concat(a),children:s})},Table.Body=e=>{let{children:s,className:a=""}=e;return(0,l.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white ".concat(a),children:s})},Table.Row=e=>{let{children:s,className:a="",onClick:r}=e;return(0,l.jsx)(t.E.tr,{className:"".concat(r?"cursor-pointer hover:bg-gray-50":""," ").concat(a),onClick:r,whileHover:r?{backgroundColor:"#f9fafb"}:{},transition:{duration:.2},children:s})},Table.Cell=e=>{let{children:s,className:a="",header:t=!1}=e;return(0,l.jsx)(t?"th":"td",{className:"".concat(t?"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider":"px-6 py-4 whitespace-nowrap text-sm text-gray-900"," ").concat(a),children:s})},s.Z=Table},5649:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return Users}});var l=a(5893),t=a(7294),r=a(6953),n=a(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),c=(0,n.Z)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var d=a(9455),o=a(7764),x=a(2612),m=a(1012),h=a(4622),u=a(7705),j=a(3718),g=a(2785),p=a(4530),v=a(8024),f=a(3157),y=a(6905),N=a(7571),b=a(5415),w=a(5843),C=a(1144);let applyPhoneMask=e=>{let s=e.replace(/\D/g,"");return s.length<=2?"(".concat(s):s.length<=7?"(".concat(s.slice(0,2),") ").concat(s.slice(2)):s.length<=11?"(".concat(s.slice(0,2),") ").concat(s.slice(2,7),"-").concat(s.slice(7)):"(".concat(s.slice(0,2),") ").concat(s.slice(2,7),"-").concat(s.slice(7,11))},removePhoneMask=e=>e.replace(/\D/g,""),Z=t.memo(e=>{let{formData:s,handleNameChange:a,handleEmailChange:t,handlePhoneChange:n,handlePasswordChange:c,handleRoleChange:d,handleStatusChange:o,handleSubmit:x,editingUser:m,setIsModalOpen:h}=e;return(0,l.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(v.Z,{label:"Nome completo",placeholder:"Digite o nome",value:s.name,onChange:a,fullWidth:!0,required:!0}),(0,l.jsx)(v.Z,{label:"Email",type:"email",placeholder:"email@exemplo.com",value:s.email,onChange:t,icon:(0,l.jsx)(r.Z,{className:"w-4 h-4"}),fullWidth:!0,required:!0})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(v.Z,{label:"Telefone",placeholder:"(11) 99999-9999",value:s.phone,onChange:n,icon:(0,l.jsx)(i,{className:"w-4 h-4"}),fullWidth:!0,required:!0}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fun\xe7\xe3o"}),(0,l.jsxs)("select",{className:"input w-full",value:s.role,onChange:d,children:[(0,l.jsx)("option",{value:"user",children:"Usu\xe1rio"}),(0,l.jsx)("option",{value:"manager",children:"Gerente"}),(0,l.jsx)("option",{value:"admin",children:"Administrador"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsx)(v.Z,{label:"Senha",type:"password",placeholder:"Digite a senha",value:s.password,onChange:c,fullWidth:!0,required:!m}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,l.jsxs)("select",{className:"input w-full",value:s.status,onChange:o,children:[(0,l.jsx)("option",{value:"active",children:"Ativo"}),(0,l.jsx)("option",{value:"inactive",children:"Inativo"})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,l.jsx)(p.Z,{type:"button",variant:"secondary",onClick:()=>h(!1),children:"Cancelar"}),(0,l.jsxs)(p.Z,{type:"submit",variant:"primary",children:[m?"Atualizar":"Criar"," Usu\xe1rio"]})]})]})});function UsersContent(){let{token:e}=(0,C.aC)(),[s,a]=(0,t.useState)([]),[r,n]=(0,t.useState)(""),[i,b]=(0,t.useState)("all"),[k,S]=(0,t.useState)(!1),[E,P]=(0,t.useState)(null),[U,M]=(0,t.useState)(!0),[B,_]=(0,t.useState)(!1),[D,T]=(0,t.useState)(null),[z,R]=(0,t.useState)([]),[A,L]=(0,t.useState)([]),[q,F]=(0,t.useState)(""),[H,I]=(0,t.useState)(""),[O,W]=(0,t.useState)([]),[G,V]=(0,t.useState)([]),[X,$]=(0,t.useState)({name:"",email:"",phone:"",password:"",role:"user",status:"active"}),fetchUsers=async()=>{try{M(!0);let s=await (0,w.Rf)(null!=e?e:void 0);a(s)}catch(e){console.error("Erro ao carregar usu\xe1rios:",e)}finally{M(!1)}};(0,t.useEffect)(()=>{fetchUsers()},[e]);let J=s.filter(e=>{let s=e.name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase()),a="all"===i||e.role===i;return s&&a}),getRoleIcon=e=>{switch(e){case"admin":return(0,l.jsx)(c,{className:"w-4 h-4 text-red-600"});case"manager":return(0,l.jsx)(d.Z,{className:"w-4 h-4 text-blue-600"});default:return(0,l.jsx)(d.Z,{className:"w-4 h-4 text-gray-600"})}},getRoleBadge=e=>(0,l.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({admin:"bg-red-100 text-red-800",manager:"bg-blue-100 text-blue-800",user:"bg-gray-100 text-gray-800"}[e]),children:[getRoleIcon(e),(0,l.jsx)("span",{className:"ml-1 capitalize",children:e})]}),getStatusBadge=e=>(0,l.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800"}[e]),children:[(0,l.jsx)("div",{className:"w-1.5 h-1.5 rounded-full mr-1.5 ".concat("active"===e?"bg-green-400":"bg-gray-400")}),"active"===e?"Ativo":"Inativo"]}),handleSubmit=async s=>{s.preventDefault();try{let s={...X,phone:removePhoneMask(X.phone)};E?await (0,w.Nq)(E.id,s,null!=e?e:void 0):await (0,w.r4)(s,null!=e?e:void 0),S(!1),$({name:"",email:"",phone:"",password:"",role:"user",status:"active"}),P(null),fetchUsers()}catch(e){console.error("Erro ao salvar usu\xe1rio:",e)}},handleDelete=async s=>{if(window.confirm("Tem certeza que deseja excluir este usu\xe1rio?"))try{await (0,w.h8)(s,null!=e?e:void 0),fetchUsers()}catch(e){console.error("Erro ao deletar usu\xe1rio:",e)}},openPermissionsModal=async s=>{T(s),_(!0);try{let s=await (0,w.Zu)();R(s);let a=await (0,w.DS)(null!=e?e:void 0);W(a),F(""),I(""),L([])}catch(e){console.error("Erro ao carregar dados para permiss\xf5es:",e)}},handleTenantChange=async s=>{if(F(s),I(""),L([]),s)try{let a=await (0,w.mu)(s,null!=e?e:void 0);V(a)}catch(e){console.error("Erro ao carregar BUs:",e)}},handleBusinessUnitChange=async e=>{if(I(e),e&&D)try{let s=await (0,w.$h)(D.id,e);L(s)}catch(e){console.error("Erro ao carregar permiss\xf5es do usu\xe1rio:",e)}},handlePermissionToggle=(e,s)=>{L(a=>a.map(a=>a.permission_code===e?{...a,is_granted:s}:a))},handleSavePermissions=async()=>{if(D&&H)try{await (0,w.Xx)(D.id,H,A),_(!1),T(null),alert("Permiss\xf5es atualizadas com sucesso!")}catch(e){console.error("Erro ao salvar permiss\xf5es:",e),alert("Erro ao salvar permiss\xf5es")}},openEditModal=e=>{P(e),$({name:e.name,email:e.email,phone:applyPhoneMask(e.phone),password:"",role:e.role,status:e.status}),S(!0)},K=(0,t.useCallback)((e,s)=>{$(a=>({...a,[e]:s}))},[]),Q=(0,t.useCallback)(e=>{K("name",e.target.value)},[K]),Y=(0,t.useCallback)(e=>{K("email",e.target.value)},[K]),ee=(0,t.useCallback)(e=>{let s=applyPhoneMask(e.target.value);K("phone",s)},[K]),es=(0,t.useCallback)(e=>{K("role",e.target.value)},[K]),ea=(0,t.useCallback)(e=>{K("password",e.target.value)},[K]),el=(0,t.useCallback)(e=>{K("status",e.target.value)},[K]);return(0,l.jsxs)(g.Z,{title:"Usu\xe1rios",children:[(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,l.jsx)("div",{className:"flex-1 max-w-lg",children:(0,l.jsx)(v.Z,{placeholder:"Buscar usu\xe1rios...",value:r,onChange:e=>n(e.target.value),icon:(0,l.jsx)(o.Z,{className:"w-4 h-4"}),fullWidth:!0})}),(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsxs)("select",{value:i,onChange:e=>b(e.target.value),className:"input",children:[(0,l.jsx)("option",{value:"all",children:"Todas as fun\xe7\xf5es"}),(0,l.jsx)("option",{value:"admin",children:"Administrador"}),(0,l.jsx)("option",{value:"manager",children:"Gerente"}),(0,l.jsx)("option",{value:"user",children:"Usu\xe1rio"})]}),(0,l.jsx)(p.Z,{variant:"secondary",icon:(0,l.jsx)(x.Z,{className:"w-4 h-4"}),children:"Filtros"}),(0,l.jsx)(p.Z,{variant:"primary",icon:(0,l.jsx)(m.Z,{className:"w-4 h-4"}),onClick:()=>{P(null),$({name:"",email:"",phone:"",password:"",role:"user",status:"active"}),S(!0)},children:"Novo Usu\xe1rio"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,l.jsx)(f.Z,{hover:!0,children:(0,l.jsx)(f.Z.Body,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(d.Z,{className:"w-5 h-5 text-blue-600"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total de Usu\xe1rios"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:s.length})]})]})})}),(0,l.jsx)(f.Z,{hover:!0,children:(0,l.jsx)(f.Z.Body,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(c,{className:"w-5 h-5 text-green-600"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Usu\xe1rios Ativos"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(e=>"active"===e.status).length})]})]})})}),(0,l.jsx)(f.Z,{hover:!0,children:(0,l.jsx)(f.Z.Body,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(d.Z,{className:"w-5 h-5 text-purple-600"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Administradores"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:s.filter(e=>"admin"===e.role).length})]})]})})}),(0,l.jsx)(f.Z,{hover:!0,children:(0,l.jsx)(f.Z.Body,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)(h.Z,{className:"w-5 h-5 text-orange-600"})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Novos este m\xeas"}),(0,l.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"2"})]})]})})})]}),(0,l.jsx)(f.Z,{children:(0,l.jsx)(f.Z.Body,{className:"p-0",children:U?(0,l.jsxs)("div",{className:"p-8 text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-2 text-gray-500",children:"Carregando usu\xe1rios..."})]}):(0,l.jsxs)(y.Z,{children:[(0,l.jsx)(y.Z.Header,{children:(0,l.jsxs)(y.Z.Row,{children:[(0,l.jsx)(y.Z.Cell,{header:!0,children:"Usu\xe1rio"}),(0,l.jsx)(y.Z.Cell,{header:!0,children:"Contato"}),(0,l.jsx)(y.Z.Cell,{header:!0,children:"Fun\xe7\xe3o"}),(0,l.jsx)(y.Z.Cell,{header:!0,children:"Status"}),(0,l.jsx)(y.Z.Cell,{header:!0,children:"\xdaltimo Login"}),(0,l.jsx)(y.Z.Cell,{header:!0,children:"A\xe7\xf5es"})]})}),(0,l.jsx)(y.Z.Body,{children:J.map(e=>(0,l.jsxs)(y.Z.Row,{children:[(0,l.jsx)(y.Z.Cell,{children:(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,l.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name.split(" ").map(e=>e[0]).join("")})})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,l.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]})}),(0,l.jsxs)(y.Z.Cell,{children:[(0,l.jsx)("div",{className:"text-sm text-gray-900",children:e.email}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]}),(0,l.jsx)(y.Z.Cell,{children:getRoleBadge(e.role)}),(0,l.jsx)(y.Z.Cell,{children:getStatusBadge(e.status)}),(0,l.jsx)(y.Z.Cell,{children:(0,l.jsx)("div",{className:"text-sm text-gray-900",children:e.last_login?new Date(e.last_login).toLocaleDateString("pt-BR"):"Nunca"})}),(0,l.jsx)(y.Z.Cell,{children:(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(p.Z,{variant:"ghost",size:"sm",icon:(0,l.jsx)(u.Z,{className:"w-4 h-4"}),onClick:()=>openEditModal(e)}),(0,l.jsx)(p.Z,{variant:"ghost",size:"sm",icon:(0,l.jsx)(c,{className:"w-4 h-4"}),className:"text-blue-600 hover:text-blue-700",onClick:()=>openPermissionsModal(e),title:"Gerenciar Permiss\xf5es"}),(0,l.jsx)(p.Z,{variant:"ghost",size:"sm",icon:(0,l.jsx)(j.Z,{className:"w-4 h-4"}),className:"text-red-600 hover:text-red-700",onClick:()=>handleDelete(e.id)})]})})]},e.id))})]})})})]}),(0,l.jsx)(N.Z,{isOpen:k,onClose:()=>S(!1),title:E?"Editar Usu\xe1rio":"Novo Usu\xe1rio",size:"lg",children:(0,l.jsx)(Z,{formData:X,handleNameChange:Q,handleEmailChange:Y,handlePhoneChange:ee,handlePasswordChange:ea,handleRoleChange:es,handleStatusChange:el,handleSubmit:handleSubmit,editingUser:E,setIsModalOpen:S})}),(0,l.jsx)(N.Z,{isOpen:B,onClose:()=>_(!1),title:"Gerenciar Permiss\xf5es - ".concat((null==D?void 0:D.name)||""),size:"xl",children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Empresa"}),(0,l.jsxs)("select",{className:"input w-full",value:q,onChange:e=>handleTenantChange(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Selecione uma empresa"}),O.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unidade de Neg\xf3cio"}),(0,l.jsxs)("select",{className:"input w-full",value:H,onChange:e=>handleBusinessUnitChange(e.target.value),disabled:!q,children:[(0,l.jsx)("option",{value:"",children:"Selecione uma BU"}),G.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),H&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Permiss\xf5es Dispon\xedveis"}),(0,l.jsx)("div",{className:"space-y-3",children:z.map(e=>{let s=A.find(s=>s.permission_code===e.code),a=(null==s?void 0:s.is_granted)||!1;return(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,l.jsxs)("label",{className:"flex items-center",children:[(0,l.jsx)("input",{type:"checkbox",checked:a,onChange:s=>handlePermissionToggle(e.code,s.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,l.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:a?"Concedida":"Negada"})]})]},e.code)})})]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,l.jsx)(p.Z,{variant:"secondary",onClick:()=>_(!1),children:"Cancelar"}),(0,l.jsx)(p.Z,{variant:"primary",onClick:handleSavePermissions,disabled:!H,children:"Salvar Permiss\xf5es"})]})]})})]})}function Users(){return(0,l.jsx)(b.Z,{children:(0,l.jsx)(UsersContent,{})})}Z.displayName="UserForm"}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=4764)}),_N_E=e.O()}]);