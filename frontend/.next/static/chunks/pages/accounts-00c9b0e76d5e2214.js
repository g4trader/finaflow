(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{1012:function(e,a,s){"use strict";s.d(a,{Z:function(){return l}});var t=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7705:function(e,a,s){"use strict";s.d(a,{Z:function(){return l}});var t=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3718:function(e,a,s){"use strict";s.d(a,{Z:function(){return l}});var t=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,t.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6076:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/accounts",function(){return s(974)}])},5415:function(e,a,s){"use strict";s.d(a,{Z:function(){return ProtectedRoute}});var t=s(5893),l=s(7294),r=s(1163),n=s(1144);function ProtectedRoute(e){let{children:a}=e,{token:s,isLoading:i}=(0,n.aC)(),c=(0,r.useRouter)(),[d,o]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{i||s||(console.log("\uD83D\uDD12 Usu\xe1rio n\xe3o autenticado, redirecionando para login..."),o(!0),c.replace("/login"))},[s,i,c]),i||d||!s)?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:i?"Carregando...":"Verificando autentica\xe7\xe3o..."})]})}):(0,t.jsx)(t.Fragment,{children:a})}},3157:function(e,a,s){"use strict";var t=s(5893);s(7294);var l=s(607);let Card=e=>{let{children:a,className:s="",hover:r=!1,padding:n="md"}=e,i=["card",{none:"",sm:"p-4",md:"p-6",lg:"p-8"}[n],r?"hover:shadow-medium transition-shadow duration-200":"",s].filter(Boolean).join(" ");return(0,t.jsx)(l.E.div,{className:i,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},whileHover:r?{y:-2}:{},children:a})};Card.Header=e=>{let{children:a,className:s=""}=e;return(0,t.jsx)("div",{className:"card-header ".concat(s),children:a})},Card.Body=e=>{let{children:a,className:s=""}=e;return(0,t.jsx)("div",{className:"card-body ".concat(s),children:a})},Card.Footer=e=>{let{children:a,className:s=""}=e;return(0,t.jsx)("div",{className:"card-footer ".concat(s),children:a})},a.Z=Card},8024:function(e,a,s){"use strict";var t=s(5893),l=s(7294);let r=(0,l.forwardRef)((e,a)=>{let{label:s,error:l,helperText:r,icon:n,iconPosition:i="left",fullWidth:c=!1,className:d="",...o}=e,x=["input",l?"input-error":"",n?"left"===i?"pl-10":"pr-10":"",c?"w-full":"",d].filter(Boolean).join(" ");return(0,t.jsxs)("div",{className:c?"w-full":"",children:[s&&(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),(0,t.jsxs)("div",{className:"relative",children:[n&&(0,t.jsx)("div",{className:"absolute inset-y-0 ".concat("left"===i?"left-0 pl-3":"right-0 pr-3"," flex items-center pointer-events-none"),children:(0,t.jsx)("span",{className:"text-gray-400 ".concat(l?"text-red-400":""),children:n})}),(0,t.jsx)("input",{ref:a,className:x,...o})]}),l&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:l}),r&&!l&&(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]})});r.displayName="Input",a.Z=r},7571:function(e,a,s){"use strict";var t=s(5893),l=s(7294),r=s(1352),n=s(4530);a.Z=e=>{let{isOpen:a,onClose:s,title:i,children:c,size:d="md",showCloseButton:o=!0}=e;return((0,l.useEffect)(()=>{let handleEscape=e=>{"Escape"===e.key&&s()};return a&&(document.addEventListener("keydown",handleEscape),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",handleEscape),document.body.style.overflow="unset"}},[a,s]),a)?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:s}),(0,t.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"relative w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[d]," bg-white rounded-xl shadow-xl"),onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),o&&(0,t.jsx)(n.Z,{variant:"ghost",size:"sm",onClick:s,icon:(0,t.jsx)(r.Z,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"p-6",children:c})]})})]}):null}},6905:function(e,a,s){"use strict";var t=s(5893);s(7294);var l=s(607);let Table=e=>{let{children:a,className:s=""}=e;return(0,t.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200 bg-white",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsx)("table",{className:"min-w-full divide-y divide-gray-200 ".concat(s),children:a})})})};Table.Header=e=>{let{children:a,className:s=""}=e;return(0,t.jsx)("thead",{className:"bg-gray-50 ".concat(s),children:a})},Table.Body=e=>{let{children:a,className:s=""}=e;return(0,t.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white ".concat(s),children:a})},Table.Row=e=>{let{children:a,className:s="",onClick:r}=e;return(0,t.jsx)(l.E.tr,{className:"".concat(r?"cursor-pointer hover:bg-gray-50":""," ").concat(s),onClick:r,whileHover:r?{backgroundColor:"#f9fafb"}:{},transition:{duration:.2},children:a})},Table.Cell=e=>{let{children:a,className:s="",header:l=!1}=e;return(0,t.jsx)(l?"th":"td",{className:"".concat(l?"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider":"px-6 py-4 whitespace-nowrap text-sm text-gray-900"," ").concat(s),children:a})},a.Z=Table},974:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Accounts}});var t=s(5893),l=s(7294),r=s(1373);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var i=s(8142),c=s(1012);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,r.Z)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var o=s(7764),x=s(7705),u=s(3718),m=s(2785),h=s(3157),j=s(6905),p=s(7571),v=s(8024),f=s(4530),g=s(5415),b=s(5843),y=s(1144);function AccountsContent(){let{token:e,tenantId:a}=(0,l.useContext)(y.Vo),[s,r]=(0,l.useState)([]),[g,N]=(0,l.useState)([]),[w,C]=(0,l.useState)(""),[Z,k]=(0,l.useState)("all"),[S,E]=(0,l.useState)(!1),[_,D]=(0,l.useState)(null),[B,T]=(0,l.useState)(!0),[R,P]=(0,l.useState)(!1),[M,H]=(0,l.useState)({subgroup_id:"",name:"",balance:""}),fetchData=async()=>{try{T(!0);let[a,s]=await Promise.all([(0,b.T8)(null!=e?e:void 0),(0,b.l9)(null!=e?e:void 0)]);r(a||[]),N(s||[])}catch(e){console.error("Erro ao buscar contas",e)}finally{T(!1)}};(0,l.useEffect)(()=>{fetchData()},[e]);let openNew=()=>{D(null),H({subgroup_id:"",name:"",balance:""}),E(!0)},openEdit=e=>{D(e),H({subgroup_id:e.subgroup_id,name:e.name,balance:String(e.balance)}),E(!0)},handleSubmit=async e=>{if(e.preventDefault(),!M.name.trim()){alert("Por favor, informe o nome da conta");return}if(!M.subgroup_id){alert("Por favor, selecione um subgrupo");return}let s=parseFloat(M.balance);if(isNaN(s)){alert("Por favor, informe um valor v\xe1lido para o saldo");return}try{P(!0);let e={subgroup_id:M.subgroup_id,name:M.name.trim(),balance:s,tenant_id:a};_?await (0,b.sG)(_.id,e):await (0,b.o1)(e),await fetchData(),E(!1)}catch(e){console.error("Erro ao salvar conta",e),alert("Erro ao salvar conta. Tente novamente.")}finally{P(!1)}},handleDelete=async e=>{if(confirm("Tem certeza que deseja excluir esta conta?"))try{await (0,b.tm)(e),await fetchData()}catch(e){console.error("Erro ao excluir conta",e),alert("Erro ao excluir conta. Tente novamente.")}},q=s.filter(e=>{let a=e.name.toLowerCase().includes(w.toLowerCase()),s="all"===Z||e.subgroup_id===Z;return a&&s}),z=q.reduce((e,a)=>e+(a.balance||0),0),A=q.length,getSubgroupName=e=>{let a=g.find(a=>a.id===e);return(null==a?void 0:a.name)||"Subgrupo n\xe3o encontrado"};return B?(0,t.jsx)(m.Z,{title:"Contas",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Gerenciar Contas"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Controle suas contas banc\xe1rias"})]}),(0,t.jsx)("div",{className:"h-10 bg-gray-200 rounded animate-pulse w-32"})]}),(0,t.jsx)(h.Z,{children:(0,t.jsx)(h.Z.Body,{className:"p-0",children:(0,t.jsx)("div",{className:"animate-pulse",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"p-6 border-b border-gray-200 last:border-b-0",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]},a))})})})]})}):(0,t.jsx)(m.Z,{title:"Contas",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Gerenciar Contas"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Controle suas contas banc\xe1rias"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)(f.Z,{variant:"secondary",icon:(0,t.jsx)(n,{className:"w-4 h-4"}),children:"Exportar"}),(0,t.jsx)(f.Z,{variant:"secondary",icon:(0,t.jsx)(i.Z,{className:"w-4 h-4"}),children:"Importar"}),(0,t.jsx)(f.Z,{icon:(0,t.jsx)(c.Z,{className:"w-4 h-4"}),onClick:openNew,children:"Nova Conta"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsx)(h.Z,{children:(0,t.jsx)(h.Z.Body,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)(d,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total de Contas"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A})]})]})})}),(0,t.jsx)(h.Z,{children:(0,t.jsx)(h.Z.Body,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,t.jsx)(d,{className:"w-6 h-6 text-green-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Saldo Total"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["R$ ",z.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})})})]}),(0,t.jsx)(h.Z,{children:(0,t.jsx)(h.Z.Body,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar Conta"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,t.jsx)(v.Z,{type:"text",placeholder:"Digite o nome da conta...",value:w,onChange:e=>C(e.target.value),className:"pl-10"})]})]}),(0,t.jsxs)("div",{className:"sm:w-64",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrar por Subgrupo"}),(0,t.jsxs)("select",{value:Z,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"Todos os Subgrupos"}),g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})})}),(0,t.jsx)(h.Z,{children:(0,t.jsx)(h.Z.Body,{className:"p-0",children:q.length>0?(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(j.Z.Header,{children:(0,t.jsxs)(j.Z.Row,{children:[(0,t.jsx)(j.Z.Cell,{header:!0,children:"Nome da Conta"}),(0,t.jsx)(j.Z.Cell,{header:!0,children:"Subgrupo"}),(0,t.jsx)(j.Z.Cell,{header:!0,children:"Saldo"}),(0,t.jsx)(j.Z.Cell,{header:!0,children:"Data de Cria\xe7\xe3o"}),(0,t.jsx)(j.Z.Cell,{header:!0,children:"A\xe7\xf5es"})]})}),(0,t.jsx)(j.Z.Body,{children:q.map(e=>(0,t.jsxs)(j.Z.Row,{children:[(0,t.jsx)(j.Z.Cell,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})}),(0,t.jsx)(j.Z.Cell,{children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:getSubgroupName(e.subgroup_id)})}),(0,t.jsx)(j.Z.Cell,{children:(0,t.jsxs)("span",{className:"font-medium ".concat(e.balance>=0?"text-green-600":"text-red-600"),children:["R$ ",e.balance.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),(0,t.jsx)(j.Z.Cell,{children:e.created_at?new Date(e.created_at).toLocaleDateString("pt-BR"):"N/A"}),(0,t.jsx)(j.Z.Cell,{children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(f.Z,{variant:"ghost",size:"sm",icon:(0,t.jsx)(x.Z,{className:"w-4 h-4"}),onClick:()=>openEdit(e)}),(0,t.jsx)(f.Z,{variant:"ghost",size:"sm",icon:(0,t.jsx)(u.Z,{className:"w-4 h-4"}),onClick:()=>handleDelete(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50"})]})})]},e.id))})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-64 text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(d,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"Nenhuma conta encontrada"}),(0,t.jsx)("p",{className:"text-sm",children:"Crie sua primeira conta para come\xe7ar"}),(0,t.jsx)(f.Z,{icon:(0,t.jsx)(c.Z,{className:"w-4 h-4"}),onClick:openNew,className:"mt-4",children:"Criar Conta"})]})})})}),(0,t.jsx)(p.Z,{isOpen:S,onClose:()=>E(!1),title:_?"Editar Conta":"Nova Conta",children:(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Conta *"}),(0,t.jsx)(v.Z,{type:"text",placeholder:"Ex: Conta Corrente Banco do Brasil",value:M.name,onChange:e=>H({...M,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subgrupo *"}),(0,t.jsxs)("select",{value:M.subgroup_id,onChange:e=>H({...M,subgroup_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Selecione um subgrupo"}),g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saldo Inicial *"}),(0,t.jsx)(v.Z,{type:"number",step:"0.01",placeholder:"0,00",value:M.balance,onChange:e=>H({...M,balance:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,t.jsx)(f.Z,{type:"button",variant:"secondary",onClick:()=>E(!1),disabled:R,children:"Cancelar"}),(0,t.jsx)(f.Z,{type:"submit",disabled:R,children:R?"Salvando...":_?"Atualizar":"Criar"})]})]})})]})})}function Accounts(){return(0,t.jsx)(g.Z,{children:(0,t.jsx)(AccountsContent,{})})}}},function(e){e.O(0,[607,899,785,774,888,179],function(){return e(e.s=6076)}),_N_E=e.O()}]);